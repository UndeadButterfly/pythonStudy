{%extends 'base.html'%}
{%block content%}
<p><a href="/pybo/">목록</a></p>
<!--container-->
<div class="container">
    <!-- 질문 py: 상하 패딩!-->
    <h2 class="border-bottom py-2">{{question.subject}}</h2>
    <div class="card">
        <div class="card-text pb-5" style="white-space:pre-line;">{{question.content}}</div>
        <div class="d-flex justify-content-end">
            <div class="badge bg-light text-dark p-2">
                {{question.create_date}}
            </div>
        </div>
    </div>
    <!--질문 end-->

    <!--답변-->
    <h5 class="border-bottom py-2 my-3">{{question.answer_set.count}}개의 답변이 있습니다.</h5>
    {%for answer in question.answer_set.all%}
    <div class="card my-1">
        <div class="card-text pb-5" style="white-space:pre-line;">{{answer.content}}</div>
        <div class="d-flex justify-content-end">
            <div class="badge bg-light text-dark p-2">
                {{answer.create_date}}
            </div>
        </div>
    </div>
    {%endfor%}
    <!--답변 end-->

    <!--답변 등록-->
    <form action="{%url 'pybo:answer_create' question.id %}" method="post" class="my-3" name="answer_form">
        {%csrf_token%}
        <!--form validation 기능-->
        {%if form.errors%}
        <div class="alert alert-danger" role="alert">
            {%for field in form%}
            {%if field.errors%}
            <div><strong>{{ field.label }}</strong></div>
            {{ field.errors }}
            {%endif%}
            {%endfor%}
        </div>
        {%endif%}
        <!--form validation 기능 end-->
        <div class="mb-3">
            <label for="content" class="col-form-label">내용</label>
            <textarea name="content" id="content" cols="20" rows="10" class="form-control"></textarea>
        </div>
        <!--        <input class="btn btn-primary btn-sm" type="button" value="답변등록" onclick="javascript:doSave();">-->
        <input class="btn btn-primary btn-sm" type="submit" value="답변등록">
    </form>
    <!--답변 등록 end-->
    <script>
        function doSave(){
            <!--console.log('doSave');-->
            let form = document.answer_form;
            let content = form.content.value;
            console.log('content'+content);
            if(isEmpty(content) == true){
                alert('내용을 입력하세요');
                form.content.focus();
                return;
            }

            //서버로 전송
            form.submit;
        };
    </script>
</div>
<!--container end-->
{%endblock%}